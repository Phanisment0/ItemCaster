plugins {
	id 'java-library'
	id 'application'
}

group = project.group
version = project.version

application {
	mainClass = project.main_class
}

base {
	archivesName = project.archivesName
}

repositories {
	mavenLocal()
	mavenCentral()
	maven { url "https://repo.papermc.io/repository/maven-public/" }
	maven { url "https://repo.codemc.io/repository/maven-public/" }
	maven { url "https://mvn.lumine.io/repository/maven-public/" }
	maven { url "https://repo.oraxen.com/releases" }
	maven { url "https://repo.nexomc.com/releases" }
	maven { url "https://maven.devs.beer/" }
	/*
	maven {
		url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
		content {
			includeGroup "org.bukkit"
			includeGroup "org.spigotmc"
		}
	}
	*/
}

dependencies {
	compileOnly "io.papermc.paper:paper-api:${project.api_version}"
//compileOnly "org.spigotmc:spigot-api:${project.api_version}"
	compileOnly "com.google.code.gson:gson:${project.gson_version}"
	compileOnly "io.lumine:Mythic-Dist:${project.mythicmobs_version}"
	compileOnly "de.tr7zw:item-nbt-api-plugin:${project.nbt_api_version}"
	compileOnly "dev.lone:api-itemsadder:${project.itemsadder_version}"
	compileOnly "io.th0rgal:oraxen:${project.oraxen_version}"
	compileOnly "com.nexomc:nexo:${project.nexo_version}"
	
	compileOnly "net.kyori:adventure-api:${project.adventure_version}"
	compileOnly "net.kyori:adventure-text-minimessage:${project.adventure_version}"
	compileOnly "net.kyori:adventure-text-serializer-legacy:${project.adventure_version}"
}

processResources {
	def props = [
		"version"		: project.version,
		"main_class": project.main_class
	]
	inputs.properties(props)
	filesMatching("plugin.yml") {
		expand(props)
	}
}

jar {
	inputs.property "archivesName", project.base.archivesName
	from('LICENSE') {
		into('.')
	}
}

tasks.withType(JavaCompile).configureEach {
	it.options.release = 21
}

java {
	withSourcesJar()
	sourceCompatibility = JavaVersion.VERSION_21
	targetCompatibility = JavaVersion.VERSION_21
}